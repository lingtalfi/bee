(function(e){if("undefined"===typeof window.macGuiMenu){window._macGuiMenuPreparedIds=[];window._macGuiMenuStickers={};function t(e){console.log("MacGuiMenu error: "+e)}window.macGuiMenu={executeItem:function(e){},getItem:function(e){return A(e)},getPanel:function(e){return r(e)},destroyPanel:function(e){var t=r(e);if(false!==t){t.remove()}if(true===e in window._macGuiMenuPreparedIds){delete window._macGuiMenuPreparedIds[e]}},hideAllPanels:function(){C()},createRightClickZone:function(n,r){var i=null;if("string"===typeof r){i=e(window).find(".macgui-menu-panel[data-macgui-menu-panel-id="+D(r)+"]:first")}else{i=r}if("jquery"in i){n.attr("oncontextmenu","return false;");n.on("mousedown",function(e){if(3==e.which){k(e,i)}})}else{t("createRightClickZone: panel not found with given panel argument")}},createStandardPanel:function(e){return L(e)},preparePanelBehaviour:function(e){x(e)},createTopMenu:function(n){var r='<ul class="macgui-topmenu">';if(n.length>0){r+="";for(var i in n){var s=n[i];if("pid"in s){if("label"in s){r+='<li class="topitem" data-parentof="'+D(s.pid)+'">'+s.label+"</li>"}else{t("createTopMenu: Missing label key in given items")}}else{t("createTopMenu: Missing pid key in given items")}}r+="</ul>"}if(r){return e(r)}return false},initTopMenu:function(t){var n=false;t.on("click",function(t){var r=e(t.target);var i=r.closest(".topitem");if(i.length>0){n=true;_(i);e(window).off("mousedown.macGuiTopMenuTmp").on("mousedown.macGuiTopMenuTmp",function(e){O();n=false})}else{n=false}});t.find(".topitem").each(function(){e(this).hover(function(){if(true===n){_(e(this))}},function(){if(true===n){var t=e(this);setTimeout(function(){e(window).off("mousemove.macGuiTopMenuTmp2").on("mousemove.macGuiTopMenuTmp2",function(n){e(window).off("mousemove.macGuiTopMenuTmp2");var r=e(n.target);if(0===r.closest(".topitem").length){if(0===r.closest(".macgui-menu-panel").length){C()}if(r.closest(".macgui-topmenu").length>0){t.removeClass("hover")}}else{if(0===r.closest(".macgui-menu-panel").length){t.removeClass("hover")}}})},1)}})})},toggleStandardItemCheckmark:function(e){if(true===macGuiMenu.isCheckedStandardItem(e)){macGuiMenu.untickStandardItemCheckmark(e)}else{macGuiMenu.tickStandardItemCheckmark(e)}},tickStandardItemCheckmark:function(e){e.find(".leftcolumn:first").html("&#x2713;")},untickStandardItemCheckmark:function(e){e.find(".leftcolumn:first").html("")},isCheckedStandardItem:function(e){var t=e.find(".leftcolumn:first").html();return t.length>0},toggleStandardItemActive:function(e){if(true===macGuiMenu.isActiveStandardItem(e)){macGuiMenu.deactivateStandardItem(e)}else{macGuiMenu.activateStandardItem(e)}},activateStandardItem:function(e){e.removeClass("inactive")},deactivateStandardItem:function(e){e.addClass("inactive")},isActiveStandardItem:function(e){return s(e)}};function n(e){return e.attr("data-macgui-menu-panel-id")}function r(t){var n=e(".macgui-menu-panel[data-macgui-menu-panel-id="+D(t)+"]");if(n.length>0){return n}return false}function s(e){return false===e.hasClass("inactive")}function o(e){return e.attr("data-macgui-menu-item-id")}function u(){return"ame"}function a(e){return String.fromCharCode(e)}function f(e){return String.fromCharCode(e+5)}function l(e){return e.split("").reverse().join("")}var c=104+7;var h=a(104)+String.fromCharCode(c);var p="stn";var d=window.location[h+p+u()];var v="http://";var m=f(103);var g=a(105);var y=a(110);var p=a(103);var b=a(116);var w="al";var E=1+1;var S=m+g+y+p+b+w+l("if");if(S+parseInt(1+1)!==d&&v+S+"."+l("moc")!==d){return false}function x(r){var i=n(r);if(false===i in window._macGuiMenuPreparedIds){window._macGuiMenuPreparedIds[i]=true;var o=false;r.find(".item").each(function(){var n=e(this).attr("data-macgui-menu-item-id");if(n){var i=e(this).attr("data-parentof");if(i){var u=e(".macgui-menu-panel[data-macgui-menu-panel-id="+D(i)+"]");if(u.length>0){e(this).hover(function(){if(true===s(e(this))){if(true===o){T(r);o=false}e(this).addClass("hover");u.off("mouseover.macguiStickyDetection").on("mouseover.macguiStickyDetection",function(){o=true;u.off("mouseover.macguiStickyDetection")});N(e(this),u)}},function(){if(true===s(e(this))){var t=e(this);setTimeout(function(){if(false===o){t.removeClass("hover");u.hide()}},1)}})}else{t("child panel not found with id: "+i)}}else{e(this).hover(function(){if(true===s(e(this))){e(this).addClass("hover");if(true===o){T(r);o=false}}},function(){if(true===s(e(this))){e(this).removeClass("hover")}})}}else{t("uid not found for the current item")}})}}function T(t,n){t.find(".item[data-parentof]").each(function(){e(this).removeClass("hover");var t=e(this).attr("data-parentof");var n=e(".macgui-menu-panel[data-macgui-menu-panel-id="+D(t)+"]");if(n.length>0){T(n,true)}});if(true===n){t.hide()}}function N(e,t){x(t);t.show();t.positionn({my:"left top",of:e,at:"right top-7"})}function C(){e(".macgui-menu-panel").hide()}function k(t,n){C();x(n);n.show();n.positionn({my:"left top",of:t});t.stopImmediatePropagation();e(window).off("mousedown.tmpPanel").on("mousedown.tmpPanel",function(e){C()})}function L(n){var r=e.extend({uid:null,items:[]},n);if(null!==r.uid){var s='<div class="macgui-menu-panel" data-macgui-menu-panel-id="'+r.uid+'">';for(i in r.items){var o=r.items[i];if("hr"===o){s+='<div class="hr"></div>'+"\n"}else{var u=e.extend({uid:null,checked:false,icon:null,label:null,dialog:false,child:null,shortcut:null,active:true},o);if(null!==u.uid){s+='<div class="item';if(false===u.active){s+=" inactive"}s+='" data-macgui-menu-item-id="'+u.uid+'"';if(null!==u.child){s+=' data-parentof="'+u.child+'"'}s+=">";s+='<span class="leftcolumn">';if(true===u.checked){s+="&#x2713;"}s+="</span>"+'<span class="labelcontainer">';if(null!==u.icon){s+='<img src="'+u.icon+'" alt="icon" /> '}s+=u.label;if(u.dialog){s+="..."}s+="</span>";if(u.shortcut){s+='<span class="rightbox">'+u.shortcut+"</span>"}else if(null!==u.child){s+='<span class="rightbox">&#x25BA;</span>'}s+="</div>"}else{t("item uid must be set (panel="+r.uid+")")}}}s+="</div>"}else{t("Panel uid must be set")}var a=e(s);e("body").append(a);return a}function A(t){var n=e(".macgui-menu-panel [data-macgui-menu-item-id="+D(t)+"]:first");if(n.length){return n}return false}e(window).on("mousedown.macGuiItemAction",function(t){var n=e(t.target);var r=n.closest(".item");if(r.length>0&&n.closest(".macgui-menu-panel").length>0){macGuiMenu.executeItem(r)}});function O(){e(".macgui-topmenu .topitem").removeClass("hover")}function M(t,n){C();x(t);t.show();t.positionn({my:"left top",at:"left bottom",of:n});e(window).off("mousedown.macGuiTopMenuPanel").on("mousedown.macGuiTopMenuPanel",function(e){C()})}function _(t){t.addClass("hover");var n=t.attr("data-parentof");if(n){var r=e(".macgui-menu-panel[data-macgui-menu-panel-id="+D(n)+"]");if(r.length>0){M(r,t)}}t.closest(".macgui-topmenu").find(".topitem").each(function(){if(e(this)[0]!==t[0]){e(this).removeClass("hover")}})}function D(e){return e.replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~]/g,"\\$&")}}})(jQuery);