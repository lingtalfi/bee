/* Basepack, contains Dialogg, dragg, resizz and positionn */
/* dialogg (1.0) */
(function(e){function t(e){return e.closest(".dialogg")}function n(e){var t=e.next(".dialogg-overlay");if(t.length){t.hide()}e.hide();e.dialogg("option","close")(e)}function r(e){var t=e.next(".dialogg-overlay");if(t.length){t.remove()}e.dialogg("option","destroy")(e);e.remove()}function i(e){var t=e.next(".dialogg-overlay");if(t.length){t.show()}e.show();e.dialogg("option","popIn")(e)}function s(e,t){var n=null;var r=null;var i=null;if("width"in t){n=t.width}if("height"in t){r=t.height}var s=e.find(">.content");var o={};if(null!==n){if("auto"===n){n=s.outerWidth()}o.width=n;var u=e.width()-o.width;if(u>=0){o.left=e.offset().left+Math.abs(u/2)}else{o.left=e.offset().left-Math.abs(u/2)}}if(null!==r){if("auto"===r){var a=s.height();s.css("height",1);i=s.get(0).scrollHeight+20;s.css("height",a)}else{o.height=r;i=s.height()+(r-e.height())}s.animate({height:i})}e.animate(o,400)}function o(t,r){var i=e(r.buildDialogg());var s=i.find(">.titlebar");var o=s.find(">.title");var u=s.find(">.close");var a=i.find(">.content");var f=i.find(">.buttonsbar");a.append(t);t.show();o.html(r.title);var l={};l.width=r.width;l.height=r.height;if(false===r.show){l.display="none"}l.position="absolute";i.css(l);if(r.buttons.length>0){for(var c in r.buttons){(function(t){var n=r.buttons[t];if("text"in n){var i=e(r.buildButton(n.text));f.append(i)}else{throw new Error("missing text property for button")}if("click"in n){i.on("click",function(e){n.click(e)})}})(c)}f.show()}else{f.hide()}u.on("click",function(e){n(i)});e("body").append(i);if(true===r.draggable&&"dragg"in e.fn){i.dragg({handle:s})}if(true===r.resizable&&"resizz"in e.fn){var h=i.height()-a.height();i.resizz({resize:function(e,t,n,r,i){a.css({width:"100%",height:e.height-h})},minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,handles:r.handles,createHandle:r.createHandle})}var p=null;if(true===r.modal){var d=e('<div class="dialogg-overlay"></div>');if(false===r.show){d.hide()}i.after(d);if(null!==r.zIndex){d.css("zIndex",r.zIndex);p=r.zIndex+1}else{var v=0;e(".dialogg").not(i).each(function(){var t=parseInt(e(this).css("zIndex"),10);if(t>v){v=t}});if(0===v){v=e.fn.dialogg.baseZIndex}else{v++}d.css("zIndex",v);p=v+1}}else{if(null!==r.zIndex){p=r.zIndex}}if(null!==p){i.css("zIndex",p)}e(document).on("keydown.dialoggClose",function(e){if(e.which==27){n(i)}});r.positionDialogg(i);r.create(i,r);r.popIn(i,r);return i}e.fn.dialogg=function(){var u=Array.prototype.slice.apply(arguments);if("option"===u[0]){var a=e.data(this[0],"dialoggOptions");if(undefined!==a){if(u[1]){if(undefined!==u[2]){a[u[1]]=u[2]}else{return a[u[1]]}}}}else if("close"===u[0]){n(t(this))}else if("open"===u[0]){i(t(this))}else if("destroy"===u[0]){r(t(this))}else if("autoSize"===u[0]){var f={width:"auto",height:"auto"};if(u[1]){if("width"in u[1]){f.width=u[1].width}if("height"in u[1]){f.height=u[1].height}}s(t(this),f)}else if("content"===u[0]){if(u[1]){var a=e.data(this[0],"dialoggOptions");var l=t(this);if(l.length){var c="";if(u[2]){c=u[2]}var h=null;var p=null;if(u[3]){if("width"in u[3]){h=u[3].width}if("height"in u[3]){p=u[3].height}}var d=l.find(">.titlebar >.title");var v=l.find(">.content");v.html(u[1]);d.html(c);s(l,{width:h,height:p})}}}else{var m=u[0];var g=e.extend({},e.fn.dialogg.defaults,m);console.log(g);return this.each(function(){var t=o(e(this),g);t.data("dialoggOptions",g)})}};e.fn.dialogg.defaults={buildDialogg:function(){var e="";e+='<div class="dialogg">'+'<div class="titlebar">'+'<span class="title"></span>'+'<button class="close">X</button>'+"</div>"+'<div class="content"></div>'+'<div class="buttonsbar"></div>'+"</div>";return e},buildButton:function(e){return'<button class="button">'+e+"</button>"},title:"",positionDialogg:function(t){var n=e(document).width();var r=e(document).height();var i=t.width();var s=t.height();var o=t.offset();var u=n/2-i/2;var a=r/2-s/2;t.css({left:u,top:a})},modal:false,show:true,width:"300",height:"auto",draggable:true,zIndex:null,buttons:[],resizable:true,minWidth:250,minHeight:150,maxWidth:null,maxHeight:null,handles:"se",createHandle:function(t,n){var r=e('<div class="resizz-handle resizz-handle-'+n+'"></div>');t.append(r);return r},popIn:function(e){},close:function(e){},destroy:function(e){},create:function(e,t){}};e.fn.dialogg.baseZIndex=100})(jQuery)
/* dragg (1.03) */
(function(e){function r(e){var t=parseInt(e);return t==null||isNaN(t)?0:t}var t=[];var n={startX:0,startY:0,offsetX:0,offsetY:0,oldZIndex:0,oldPosition:null,dragElement:null,options:{}};e(document).on("mousedown.dragg",function(i){if(1===i.which){var s=e(i.target);for(var o in t){var u=t[o][1];var a=u["handle"]?u["handle"]:t[o][0];if(!s.is(u["cancel"])){var f=s.closest(a);if(f.length){var l=t[o][0];var c=e(l);n.oldPosition=c.css("position");if("static"===n.oldPosition){c.css("position","relative")}n.startX=i.clientX;n.startY=i.clientY;n.offsetX=r(c.css("left"));n.offsetY=r(c.css("top"));if(0!==parseInt(u["zIndexMode"])){n.oldZIndex=l.style.zIndex;if(e.isFunction(u["indexMax"])){l.style.zIndex=u["indexMax"]()}else{l.style.zIndex=u["indexMax"]}}n.dragElement=l;n.options=u;u["start"](i,n);e(document).on("mousemove.dragg",function(e){n.options["nativeDrag"](e,n,n.options["drag"])});document.body.focus();document.onselectstart=function(){return false};i.target.ondragstart=function(){return false};return false}}}}});e(document).on("mouseup.dragg",function(t){if(n.dragElement!=null){if(2===parseInt(n.options["zIndexMode"])){n.dragElement.style.zIndex=n.oldZIndex}e(document).off("mousemove.dragg");document.onselectstart=null;n.dragElement.ondragstart=null;n.options["stop"](t,n);n.dragElement=null}});e.fn.dragg=function(){var n=Array.prototype.slice.apply(arguments);if("option"===n[0]){var r=e.data(this[0],"draggOptions");if(undefined!==r){if(n[1]){if(undefined!==n[2]){r[n[1]]=n[2]}else{return r[n[1]]}}}}else{var i=n[0];var s=e.extend({},e.fn.dragg.defaults,i);return this.each(function(){e.data(this,"draggOptions",s);t.push([this,s])})}};e.fn.dragg.animateCurrentToOriginalPosition=function(){if(n.dragElement!=null){e(n.dragElement).animate({top:n.offsetY+"px",left:n.offsetX+"px"},400)}};e.fn.dragg.isVisible=function(t){var n=e(window).height();var r=e(window).width();var i=t.width();var s=t.height();var o=t.offset();if(o.top+s<=0||o.left+i<=0||o.left>=r||o.top>=n){return false}return true};e.fn.dragg.defaults={indexMax:function(){if("undefined"===typeof window._draggAutoInc){window._draggAutoInc=1e4}return window._draggAutoInc++},zIndexMode:1,handle:null,axis:null,cancel:"input,textarea,button,select,option",start:function(e,t){},stop:function(t,n){if(false===e.fn.dragg.isVisible(e(n.dragElement))){e.fn.dragg.animateCurrentToOriginalPosition()}},nativeDrag:function(e,t,n){var r=t.offsetX+e.clientX-t.startX;var i=t.offsetY+e.clientY-t.startY;if("y"!==t.options.axis){t.dragElement.style.left=r+"px"}if("x"!==t.options.axis){t.dragElement.style.top=i+"px"}n(r,i,e,t)},drag:function(e,t,n,r){}}})(jQuery)
/* resizz (1.0) */
(function(e){function r(t,n){var r=e(t);var i=r.css("position");if("static"===i){r.css("position","relative")}var s={};var o=n.handles.split(",");for(var u in o){(function(t){var u=e.trim(o[t]);var a=n.createHandle(r,u);var f=0;var l=0;var c=parseInt(r.css("left"));var h=parseInt(r.css("top"));var p=null;var d=null;var v=null;var m=null;var g=null;switch(u){case"se":g=function(e,t,n,r,i,s,o,u){e.width=r+(s.clientX-o.startX);e.height=i+(s.clientY-o.startY)};break;case"nw":g=function(e,t,n,r,i,s,o,u){e.left=c+(s.clientX-o.startX);u.css("left",o.offsetX);e.width=r-(s.clientX-o.startX);e.top=h+(s.clientY-o.startY);u.css("top",o.offsetY);e.height=i-(s.clientY-o.startY)};break;case"n":g=function(e,t,n,r,i,s,o,u){e.top=h+(s.clientY-o.startY);u.css("top",o.offsetY);e.height=i-(s.clientY-o.startY)};break;case"ne":g=function(e,t,n,r,i,s,o,u){e.width=r+(s.clientX-o.startX);e.top=h+(s.clientY-o.startY);u.css("top",o.offsetY);e.height=i-(s.clientY-o.startY)};break;case"e":g=function(e,t,n,r,i,s,o,u){e.width=r+(s.clientX-o.startX)};break;case"s":g=function(e,t,n,r,i,s,o,u){e.height=i+(s.clientY-o.startY)};break;case"sw":g=function(e,t,n,r,i,s,o,u){e.left=c+(s.clientX-o.startX);u.css("left",o.offsetX);e.width=r-(s.clientX-o.startX);e.height=i+(s.clientY-o.startY)};break;case"w":g=function(e,t,n,r,i,s,o,u){e.left=c+(s.clientX-o.startX);u.css("left",o.offsetX);e.width=r-(s.clientX-o.startX)};break;default:throw new Error("Unknown callback for handleName "+u);break}var y=null;if("n"===u||"s"===u){y="y"}else if("w"===u||"e"===u){y="x"}a.dragg({axis:y,start:function(e,t){f=r.width();l=r.height();c=parseInt(r.css("left"));h=parseInt(r.css("top"));if(null!==n.minWidth){if(n.minWidth>f){r.width(n.minWidth)}p=c+f-n.minWidth}if(null!==n.minHeight){if(n.minHeight>l){r.height(n.minHeight)}d=h+l-n.minHeight}if(null!==n.maxWidth){if(n.maxWidth<f){r.width(n.maxWidth)}v=c-(n.maxWidth-f)}if(null!==n.maxHeight){if(n.maxHeight<l){r.height(n.maxHeight)}m=h-(n.maxHeight-l)}s={position:i,offset:r.offset()}},drag:function(e,t,i,s){var o={};g(o,e,t,f,l,i,s,a);if(null!==n.minWidth&&o.width<n.minWidth){if(null!==p&&"left"in o&&o.left>p){o.left=p}o.width=n.minWidth;a.css("left","")}if(null!==n.minHeight&&o.height<n.minHeight){if(null!==d&&"top"in o&&o.top>d){o.top=d}o.height=n.minHeight;a.css("top","")}if(null!==n.maxWidth&&o.width>n.maxWidth){if(null!==v&&"left"in o&&o.left<v){o.left=v}o.width=n.maxWidth;a.css("left","")}if(null!==n.maxHeight&&o.height>n.maxHeight){if(null!==m&&"top"in o&&o.top<m){o.top=m}o.height=n.maxHeight;a.css("top","")}r.css(o);n.resize(o,f,l,c,h)},stop:function(t,n){if(false===e.fn.dragg.isVisible(e(n.dragElement))){r.animate({top:h+"px",left:c+"px",width:f+"px",height:l+"px"},400)}a.css({top:"",left:"",zIndex:n.oldZIndex})}})})(u)}}var t=[];var n={oldPosition:null,dragElement:null,options:{}};e.fn.resizz=function(){var t=Array.prototype.slice.apply(arguments);if("option"===t[0]){var n=e.data(this[0],"resizzOptions");if(undefined!==n){if(t[1]){if(undefined!==t[2]){n[t[1]]=t[2]}else{return n[t[1]]}}}}else{var i=t[0];var s=e.extend({},e.fn.resizz.defaults,i);return this.each(function(){e.data(this,"resizzOptions",s);r(this,s)})}};e.fn.resizz.defaults={handles:"nw, n, ne, e, se, s, sw, w",createHandle:function(t,n){var r=e('<div class="resizz-handle resizz-handle-'+n+'"></div>');t.append(r);return r},resize:function(e,t,n,r,i){},minWidth:10,minHeight:10,maxWidth:null,maxHeight:null}})(jQuery)
/* positionn (1.0)*/
(function(e){function p(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function d(t,n){return parseInt(e.css(t,n),10)||0}function v(t){var n=t[0];if(n.nodeType===9){return{width:t.width(),height:t.height(),offset:{top:0,left:0}}}if(e.isWindow(n)){return{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}}if(n.preventDefault){return{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}}return{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var t,n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,l=/%$/,c=e.fn.position;var h={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;if(t.collisionWidth>s){if(u>0&&a<=0){f=e.left+u+t.collisionWidth-s-i;e.left+=u-f}else if(a>0&&u<=0){e.left=i}else{if(u>a){e.left=i+s-t.collisionWidth}else{e.left=i}}}else if(u>0){e.left+=u}else if(a>0){e.left-=a}else{e.left=r(e.left-o,e.left)}},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;if(t.collisionHeight>s){if(u>0&&a<=0){f=e.top+u+t.collisionHeight-s-i;e.top+=u-f}else if(a>0&&u<=0){e.top=i}else{if(u>a){e.top=i+s-t.collisionHeight}else{e.top=i}}}else if(u>0){e.top+=u}else if(a>0){e.top-=a}else{e.top=r(e.top-o,e.top)}}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a)){e.left+=l+c+h}}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f){e.left+=l+c+h}}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;if(a<0){v=e.top+c+h+p+t.collisionHeight-s-r;if(e.top+c+h+p>a&&(v<0||v<i(a))){e.top+=c+h+p}}else if(f>0){d=e.top-t.collisionPosition.marginTop+c+h+p-o;if(e.top+c+h+p>f&&(d>0||i(d)<f)){e.top+=c+h+p}}}},flipfit:{left:function(){h.flip.left.apply(this,arguments);h.fit.left.apply(this,arguments)},top:function(){h.flip.top.apply(this,arguments);h.fit.top.apply(this,arguments)}},scrollbarWidth:function(){if(t!==undefined){return t}var n,r,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=i.children()[0];e("body").append(i);n=s.offsetWidth;i.css("overflow","scroll");r=s.offsetWidth;if(n===r){r=i[0].clientWidth}i.remove();return t=n-r},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r=t==="scroll"||t==="auto"&&e.width<e.element[0].scrollWidth,i=n==="scroll"||n==="auto"&&e.height<e.element[0].scrollHeight;return{width:i?h.scrollbarWidth():0,height:r?h.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&n[0].nodeType===9;return{element:n,isWindow:r,isDocument:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r||i?n.width():n.outerWidth(),height:r||i?n.height():n.outerHeight()}}};e.fn.positionn=function(t){if(!t||!t.of){return c.apply(this,arguments)}t=e.extend({},t);var l,m,g,y,b,w,E=e(t.of),S=h.getWithinInfo(t.within),x=h.getScrollInfo(S),T=(t.collision||"flip").split(" "),N={};w=v(E);if(E[0].preventDefault){t.at="left top"}m=w.width;g=w.height;y=w.offset;b=e.extend({},y);e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;if(e.length===1){e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]}e[0]=o.test(e[0])?e[0]:"center";e[1]=u.test(e[1])?e[1]:"center";n=a.exec(e[0]);r=a.exec(e[1]);N[this]=[n?n[0]:0,r?r[0]:0];t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]});if(T.length===1){T[1]=T[0]}if(t.at[0]==="right"){b.left+=m}else if(t.at[0]==="center"){b.left+=m/2}if(t.at[1]==="bottom"){b.top+=g}else if(t.at[1]==="center"){b.top+=g/2}l=p(N.at,m,g);b.left+=l[0];b.top+=l[1];return this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),v=d(this,"marginLeft"),w=d(this,"marginTop"),C=f+v+d(this,"marginRight")+x.width,k=c+w+d(this,"marginBottom")+x.height,L=e.extend({},b),A=p(N.my,a.outerWidth(),a.outerHeight());if(t.my[0]==="right"){L.left-=f}else if(t.my[0]==="center"){L.left-=f/2}if(t.my[1]==="bottom"){L.top-=c}else if(t.my[1]==="center"){L.top-=c/2}L.left+=A[0];L.top+=A[1];if(!n){L.left=s(L.left);L.top=s(L.top)}o={marginLeft:v,marginTop:w};e.each(["left","top"],function(e,n){if(h[T[e]]){h[T[e]][n](L,{targetWidth:m,targetHeight:g,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:C,collisionHeight:k,offset:[l[0]+A[0],l[1]+A[1]],my:t.my,at:t.at,within:S,elem:a})}});if(t.using){u=function(e){var n=y.left-L.left,s=n+m-f,o=y.top-L.top,u=o+g-c,l={target:{element:E,left:y.left,top:y.top,width:m,height:g},element:{element:a,left:L.left,top:L.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};if(m<f&&i(n+s)<m){l.horizontal="center"}if(g<c&&i(o+u)<g){l.vertical="middle"}if(r(i(n),i(s))>r(i(o),i(u))){l.important="horizontal"}else{l.important="vertical"}t.using.call(this,e,l)}}a.offset(e.extend(L,{using:u}))})};(function(){var t,r,i,s,o,u=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(u?"div":"body");i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(u){e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"})}for(o in i){t.style[o]=i[o]}t.appendChild(a);r=u||document.documentElement;r.insertBefore(t,r.firstChild);a.style.cssText="position: absolute; left: 10.7432222px;";s=e(a).offset().left;n=s>10&&s<11;t.innerHTML="";r.removeChild(t)})()})(jQuery)


