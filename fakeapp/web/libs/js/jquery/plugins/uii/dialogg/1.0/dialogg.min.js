(function(e){function t(e){return e.closest(".dialogg")}function n(e){var t=e.next(".dialogg-overlay");if(t.length){t.hide()}e.hide();e.dialogg("option","close")(e)}function r(e){var t=e.next(".dialogg-overlay");if(t.length){t.remove()}e.dialogg("option","destroy")(e);e.remove()}function i(e){var t=e.next(".dialogg-overlay");if(t.length){t.show()}e.show();e.dialogg("option","popIn")(e)}function s(e,t){var n=null;var r=null;var i=null;if("width"in t){n=t.width}if("height"in t){r=t.height}var s=e.find(">.content");var o={};if(null!==n){if("auto"===n){n=s.outerWidth()}o.width=n;var u=e.width()-o.width;if(u>=0){o.left=e.offset().left+Math.abs(u/2)}else{o.left=e.offset().left-Math.abs(u/2)}}if(null!==r){if("auto"===r){var a=s.height();s.css("height",1);i=s.get(0).scrollHeight+20;s.css("height",a)}else{o.height=r;i=s.height()+(r-e.height())}s.animate({height:i})}e.animate(o,400)}function o(t,r){var i=e(r.buildDialogg());var s=i.find(">.titlebar");var o=s.find(">.title");var u=s.find(">.close");var a=i.find(">.content");var f=i.find(">.buttonsbar");a.append(t);t.show();o.html(r.title);var l={};l.width=r.width;l.height=r.height;if(false===r.show){l.display="none"}l.position="absolute";i.css(l);if(r.buttons.length>0){for(var c in r.buttons){(function(t){var n=r.buttons[t];if("text"in n){var i=e(r.buildButton(n.text));f.append(i)}else{throw new Error("missing text property for button")}if("click"in n){i.on("click",function(e){n.click(e)})}})(c)}f.show()}else{f.hide()}u.on("click",function(e){n(i)});e("body").append(i);if(true===r.draggable&&"dragg"in e.fn){i.dragg({handle:s})}if(true===r.resizable&&"resizz"in e.fn){var h=i.height()-a.height();i.resizz({resize:function(e,t,n,r,i){a.css({width:"100%",height:e.height-h})},minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,handles:r.handles,createHandle:r.createHandle})}var p=null;if(true===r.modal){var d=e('<div class="dialogg-overlay"></div>');if(false===r.show){d.hide()}i.after(d);if(null!==r.zIndex){d.css("zIndex",r.zIndex);p=r.zIndex+1}else{var v=0;e(".dialogg").not(i).each(function(){var t=parseInt(e(this).css("zIndex"),10);if(t>v){v=t}});if(0===v){v=e.fn.dialogg.baseZIndex}else{v++}d.css("zIndex",v);p=v+1}}else{if(null!==r.zIndex){p=r.zIndex}}if(null!==p){i.css("zIndex",p)}e(document).on("keydown.dialoggClose",function(e){if(e.which==27){n(i)}});r.positionDialogg(i);r.create(i,r);r.popIn(i,r);return i}e.fn.dialogg=function(){var u=Array.prototype.slice.apply(arguments);if("option"===u[0]){var a=e.data(this[0],"dialoggOptions");if(undefined!==a){if(u[1]){if(undefined!==u[2]){a[u[1]]=u[2]}else{return a[u[1]]}}}}else if("close"===u[0]){n(t(this))}else if("open"===u[0]){i(t(this))}else if("destroy"===u[0]){r(t(this))}else if("autoSize"===u[0]){var f={width:"auto",height:"auto"};if(u[1]){if("width"in u[1]){f.width=u[1].width}if("height"in u[1]){f.height=u[1].height}}s(t(this),f)}else if("content"===u[0]){if(u[1]){var a=e.data(this[0],"dialoggOptions");var l=t(this);if(l.length){var c="";if(u[2]){c=u[2]}var h=null;var p=null;if(u[3]){if("width"in u[3]){h=u[3].width}if("height"in u[3]){p=u[3].height}}var d=l.find(">.titlebar >.title");var v=l.find(">.content");v.html(u[1]);d.html(c);s(l,{width:h,height:p})}}}else{var m=u[0];var g=e.extend({},e.fn.dialogg.defaults,m);return this.each(function(){var t=o(e(this),g);t.data("dialoggOptions",g)})}};e.fn.dialogg.defaults={buildDialogg:function(){var e="";e+='<div class="dialogg">'+'<div class="titlebar">'+'<span class="title"></span>'+'<button class="close">X</button>'+"</div>"+'<div class="content"></div>'+'<div class="buttonsbar"></div>'+"</div>";return e},buildButton:function(e){return'<button class="button">'+e+"</button>"},title:"",positionDialogg:function(t){var n=e(document).width();var r=e(document).height();var i=t.width();var s=t.height();var o=t.offset();var u=n/2-i/2;var a=r/2-s/2;t.css({left:u,top:a})},modal:false,show:true,width:"300",height:"auto",draggable:true,zIndex:null,buttons:[],resizable:true,minWidth:250,minHeight:150,maxWidth:null,maxHeight:null,handles:"se",createHandle:function(t,n){var r=e('<div class="resizz-handle resizz-handle-'+n+'"></div>');t.append(r);return r},popIn:function(e){},close:function(e){},destroy:function(e){},create:function(e,t){}};e.fn.dialogg.baseZIndex=100})(jQuery);