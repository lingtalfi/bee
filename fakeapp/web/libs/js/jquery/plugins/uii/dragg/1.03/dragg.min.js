(function(e){function r(e){var t=parseInt(e);return t==null||isNaN(t)?0:t}var t=[];var n={startX:0,startY:0,offsetX:0,offsetY:0,oldZIndex:0,oldPosition:null,dragElement:null,options:{}};e(document).on("mousedown.dragg",function(i){if(1===i.which){var s=e(i.target);for(var o in t){var u=t[o][1];var a=u["handle"]?u["handle"]:t[o][0];if(!s.is(u["cancel"])){var f=s.closest(a);if(f.length){var l=t[o][0];var c=e(l);n.oldPosition=c.css("position");if("static"===n.oldPosition){c.css("position","relative")}n.startX=i.clientX;n.startY=i.clientY;n.offsetX=r(c.css("left"));n.offsetY=r(c.css("top"));if(0!==parseInt(u["zIndexMode"])){n.oldZIndex=l.style.zIndex;if(e.isFunction(u["indexMax"])){l.style.zIndex=u["indexMax"]()}else{l.style.zIndex=u["indexMax"]}}n.dragElement=l;n.options=u;u["start"](i,n);e(document).on("mousemove.dragg",function(e){n.options["nativeDrag"](e,n,n.options["drag"])});document.body.focus();document.onselectstart=function(){return false};i.target.ondragstart=function(){return false};return false}}}}});e(document).on("mouseup.dragg",function(t){if(n.dragElement!=null){if(2===parseInt(n.options["zIndexMode"])){n.dragElement.style.zIndex=n.oldZIndex}e(document).off("mousemove.dragg");document.onselectstart=null;n.dragElement.ondragstart=null;n.options["stop"](t,n);n.dragElement=null}});e.fn.dragg=function(){var n=Array.prototype.slice.apply(arguments);if("option"===n[0]){var r=e.data(this[0],"draggOptions");if(undefined!==r){if(n[1]){if(undefined!==n[2]){r[n[1]]=n[2]}else{return r[n[1]]}}}}else{var i=n[0];var s=e.extend({},e.fn.dragg.defaults,i);return this.each(function(){e.data(this,"draggOptions",s);t.push([this,s])})}};e.fn.dragg.animateCurrentToOriginalPosition=function(){if(n.dragElement!=null){e(n.dragElement).animate({top:n.offsetY+"px",left:n.offsetX+"px"},400)}};e.fn.dragg.isVisible=function(t){var n=e(window).height();var r=e(window).width();var i=t.width();var s=t.height();var o=t.offset();if(o.top+s<=0||o.left+i<=0||o.left>=r||o.top>=n){return false}return true};e.fn.dragg.defaults={indexMax:function(){if("undefined"===typeof window._draggAutoInc){window._draggAutoInc=1e4}return window._draggAutoInc++},zIndexMode:1,handle:null,axis:null,cancel:"input,textarea,button,select,option",start:function(e,t){},stop:function(t,n){if(false===e.fn.dragg.isVisible(e(n.dragElement))){e.fn.dragg.animateCurrentToOriginalPosition()}},nativeDrag:function(e,t,n){var r=t.offsetX+e.clientX-t.startX;var i=t.offsetY+e.clientY-t.startY;if("y"!==t.options.axis){t.dragElement.style.left=r+"px"}if("x"!==t.options.axis){t.dragElement.style.top=i+"px"}n(r,i,e,t)},drag:function(e,t,n,r){}}})(jQuery);